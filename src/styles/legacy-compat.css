/* 
  Legacy Browser Compatibility Fixes 
  Supports: iPhone 6/7/8 (iOS 9-12), Older Android (Samsung)
*/

/* 1. Flexbox Gap Fallback (Safari 12+, Old Chrome) */
.products-grid,
.thumbnail-grid {
    display: flex;
    flex-wrap: wrap;
    margin: -10px;
    /* Compensate for child margin */
}

.products-grid>*,
.thumbnail-grid>* {
    margin: 10px;
    /* Gap replacement */
}

@supports (gap: 24px) {
    .products-grid {
        display: grid;
        margin: 0;
        gap: 24px;
    }

    .products-grid>* {
        margin: 0;
    }
}

@supports (gap: 12px) {
    .thumbnail-grid {
        display: grid;
        margin: 0;
        gap: 12px;
    }

    .thumbnail-grid>* {
        margin: 0;
    }
}

/* 2. Aspect Ratio Fallback (Padding Hack) */
.product-image-wrapper {
    position: relative;
    /* aspect-ratio: 1 / 1; // Modern browsers use this */
}

/* Fallback for browsers without aspect-ratio support */
@supports not (aspect-ratio: 1) {
    .product-image-wrapper::before {
        float: left;
        padding-top: 100%;
        /* 1:1 ratio */
        content: "";
    }

    .product-image-wrapper::after {
        display: block;
        content: "";
        clear: both;
    }
}

/* 3. Image Rendering Consistency */
img {
    max-width: 100%;
    height: auto;
    shape-rendering: geometricPrecision;
    /* Better rendering on high-DPI screens */
}